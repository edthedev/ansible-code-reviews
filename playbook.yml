---
- hosts: all
  user: vagrant
  gather_facts: False 
  sudo: no
  vars_files:
    - passwords.yml
  tasks:
    - name: Install system packages
      yum: pkg={{ item }} state=installed
      sudo: yes
      with_items:
        - git-core 
        - java-1.7.0-openjdk.x86_64 # Required for Gerrit
        - postgresql-server.x86_64 # Not required, but preferred for storing Gerrit data.
        - python-psycopg2.x86_64 # Allows Ansible to run PostGres commands.
    - name: python stuff 
      sudo: yes
      pip: name=psycopg2
    - name: gerrit db user
# TODO: Back off from SUPERUSER, if possible.
      postgresql_user: name=gerrit password={{db_pass}} role_attr_flags=SUPERUSER
